<div class="phone:hidden">
  <div class="sticky top-0 w-[250px] tablet:w-full overflow-scroll h-[100vh] pr-4">
    <div class="flex items-center justify-between mb-[30px] mt-10">
      <p class="text-[18px] text-content">Short By:</p>
      <form action="" method="get">
        <div class="">
          <select
            class="w-[160px] h-[50px] bg-white border-[1px] border-solid border-gray-300 p-[10px] text-[16px]"
            name="sort_by"
            id="orderby"
            onchange="this.form.submit()"
          >
            <option value="TITLE">Default Sorting</option>
            <option value="best-selling">Best Selling</option>
            <option value="title-ascending">Alphabetically, A-Z</option>
            <option value="title-descendings">Alphabetically, Z-A</option>
            <option value="created-ascending">Sort by newness</option>
            <option value="price-ascending">Sort by price: low to high</option>
            <option value="price-descending">Sort by price: high to low</option>
          </select>
        </div>
      </form>
    </div>
    <div class="mb-10">
      {% for link in section.settings.sidebar_menu.links %}
        <h3 class="font-bold text-content filterTitle !text-[20px] py-3">{{ link.title }}</h3>
        {% if link.links.size > 0 %}
          <ul class="pl-5 mt-2">
            {% for child_link in link.links %}
              <li class="mb-3 cursor-pointer">
                <a href="{{ child_link.url }}" class="font-bold hover:text-primary">{{ child_link.title }}</a>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endfor %}

      <form class="">
        {%- for filter in collection.filters -%}
          <h3>{{ filter.label }}</h3>
          {%- case filter.type -%}
            {%- when 'price' -%}
              <h3>Filter By Price</h3>
              <div class="mt-5">
                <h3 class="font-bold text-content filterTitle !text-[20px]">Price</h3>
                <div class="productFilterRadio pb-[25px] text-[16px] font-light">
                  <div class=" flex justify-between items-center">
                    <label for="huey2">Min($0)</label
                    ><label for="huey2"
                      >Max ({{ cart.currency.symbol -}}
                      {{- filter.range_max | money_without_currency | replace: ',', '' }})</label
                    >
                  </div>
                  <input
                    class="w-full"
                    type="range"
                    id="priceSlider"
                    name="drone"
                    min="0"
                    step="1"
                    value="99.99"
                  >
                </div>
              </div>
          {%- endcase -%}
        {%- endfor -%}
      </form>
    </div>
  </div>
</div>


<form class="filter-form">
  {%- for filter in collection.filters -%}
    <details class="filter-group">
      <summary class="filter-group-summary">
        <div>
          <span>{{ filter.label }}</span>

          {%- if filter.active_values.size > 0 -%}
            <span>({{ filter.active_values.size }})</span>
          {%- endif -%}
        </div>
      </summary>

      <div class="filter-group-display">
        <div class="filter-group-display__header">
          <span class="filter-group-display__header-selected">{{ filter.active_values.size }} selected</span>

          {%- if filter.active_values.size > 0 -%}
            <a href="{{ filter.url_to_remove }}" class="filter-group-display__header-reset">Reset</a>
          {%- endif -%}
        </div>

        {%- case filter.type -%}
          {%- when 'boolean' or 'list' -%}
            <ul class="filter-group-display__list">
              {%- for filter_value in filter.values -%}
                <li class="filter-group-display__list-item">
                  <label for="Filter-{{ filter.param_name }}-{{ forloop.index }}">
                  <input type="checkbox"
                    name="{{ filter_value.param_name }}"
                    value="{{ filter_value.value }}"
                    id="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                    {% if filter_value.active -%}checked{%- endif %}
                    {% if filter_value.count == 0 and filter_value.active == false -%}disabled{%- endif %}
                  >{{ filter_value.label }}</label>
                </li>
              {%- endfor -%}
            </ul>

            <div class="filter-group-display__submit">
              <input type="submit" value="Apply">
            </div>
          {%- when 'price_range' -%}
            <div class="filter-group-display__price-range">
              <div class="filter-group-display__price-range-from">
                <span>{{ cart.currency.symbol }}</span>

                <input name="{{ filter.min_value.param_name }}"
                  id="Filter-{{ filter.min_value.param_name }}"
                  {% if filter.min_value.value -%}
                    value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                  {%- endif %}
                  type="number"
                  placeholder="0"
                  min="0"
                  max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                >

                <label for="Filter-{{ filter.min_value.param_name }}">From</label>
              </div>
              <div class="filter-group-display__price-range-to">
                <span>{{ cart.currency.symbol }}</span>

                <input name="{{ filter.max_value.param_name }}"
                  id="Filter-{{ filter.max_value.param_name }}"
                  {% if filter.max_value.value -%}
                    value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                  {%- endif %}
                  type="number"
                  placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                  min="0"
                  max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                >

                <label for="Filter-{{ filter.max_value.param_name }}">To</label>
              </div>
            </div>

            <div class="filter-group-display__submit">
              <input type="submit" value="Apply">
            </div>
        {%- endcase -%}
      </div>
    </details>
  {%- endfor -%}

  <div class="active-filters">
    <a href="{{ collection.url }}?sort_by={{ collection.sort_by }}" class="active-filters__clear">Clear all</a>

    {%- for filter in collection.filters -%}
      {%- if filter.type == "price_range" -%}
        {%- if filter.min_value.value != nil or filter.max_value.value != nil -%}
          <a class="active-filters__remove-filter" href="{{ filter.url_to_remove }}">
            {%- assign min_value = filter.min_value.value | default: 0 -%}
            {%- assign max_value = filter.max_value.value | default: filter.range_max -%}
            {{ min_value | money }} - {{ max_value | money }} X
          </a>
        {%- endif -%}
      {%- else -%}
        {%- for filter_value in filter.active_values -%}
          <a class="active-filters__remove-filter" href="{{ filter_value.url_to_remove }}">
            {{ filter.label }}: {{ filter_value.label }} X
          </a>
        {%- endfor -%}
      {%- endif- %}
    {%- endfor -%}
  </div>
</form>
